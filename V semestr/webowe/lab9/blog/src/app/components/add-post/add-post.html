<div class="container my-4">
    <button (click)="toggleForm()" class="btn btn-primary mb-3">
        {{ isFormVisible ? 'Ukryj formularz' : 'Dodaj nowy post' }}
    </button>

    <div *ngIf="isFormVisible" class="card shadow">
        <div class="card-body">
            <h5 class="card-title">Utwórz nowy post</h5>

            <form [formGroup]="postForm" (ngSubmit)="onSubmit()">
                
                <div class="mb-3">
                    <label for="postTitle" class="form-label">Tytuł</label>
                    <input 
                        type="text" 
                        class="form-control" 
                        id="postTitle" 
                        formControlName="title"
                        placeholder="Wprowadź tytuł posta (min. 5 znaków)"
                        [class.is-invalid]="postForm.get('title')?.invalid && postForm.get('title')?.touched"
                    >
                    <div *ngIf="postForm.get('title')?.invalid && postForm.get('title')?.touched" class="invalid-feedback">
                        <div *ngIf="postForm.get('title')?.errors?.['required']">Tytuł jest wymagany.</div>
                        <div *ngIf="postForm.get('title')?.errors?.['minlength']">Tytuł musi mieć co najmniej 5 znaków.</div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="postText" class="form-label">Treść</label>
                    <textarea 
                        class="form-control" 
                        id="postText" 
                        rows="5" 
                        formControlName="text"
                        placeholder="Wprowadź treść posta (min. 20 znaków)"
                        [class.is-invalid]="postForm.get('text')?.invalid && postForm.get('text')?.touched"
                    ></textarea>
                    <div *ngIf="postForm.get('text')?.invalid && postForm.get('text')?.touched" class="invalid-feedback">
                        <div *ngIf="postForm.get('text')?.errors?.['required']">Treść jest wymagana.</div>
                        <div *ngIf="postForm.get('text')?.errors?.['minlength']">Treść musi mieć co najmniej 20 znaków.</div>
                    </div>
                </div>

                <button 
                    type="submit" 
                    class="btn btn-success" 
                    [disabled]="postForm.invalid"
                >
                    Opublikuj Post
                </button>
            </form>
        </div>
    </div>
</div>